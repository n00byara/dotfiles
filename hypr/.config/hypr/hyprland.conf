monitor = , preferred, auto, auto

$terminal = kitty -c ~/dotfiles/kitty/kitty.conf
$menu = wofi --show=drun -a ~/dotfiles/wofi/everforest.css

# START WITH SYSTEM
exec-once = hyprpaper
exec-once = firefox
exec-once = nekoray
exec-once = gsettings set org.gnome.desktop.interface cursor-theme 'BreezeX-Light'
exec-once = eww daemon -c ~/dotfiles/eww/
exec-once = eww open bar -c ~/dotfiles/eww/bar
exec-once = swww-daemon
exec-once = mako
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# FLOATING WINDOWS
windowrulev2 = noblur, floating:1
windowrulev2 = rounding 17, floating:1
windowrulev2 = opacity 1.0 override, floating:1
windowrulev2 = noinitialfocus, floating:1
windowrulev2 = keepaspectratio, floating:1

windowrulev2 = noshadow, focus:1

layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell

$mainMod = AltL # Sets "Left Alt" key as main modifier
$secondMod = SUPER # Sets "Windows" key as second modifier

bind = $mainMod, Q, killactive
bind = $mainMod, T, exec, $terminal
bind = $mainMod, V, exec, cliphist list | wofi --dmenu | cliphist decode | wl-copy
bind = $mainMod, M, exit,
bind = $mainMod, E, exec, $menu
bind = $mainMod, F, togglefloating
bind = $mainMod, F, pin
bind = $mainMod, tab, layoutmsg, rollprev
bind = $mainMod&Shift_L, tab, layoutmsg, rollnext
bind = , Print, exec, grim -g "$(slurp -d)" - | wl-copy

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u 

# Move active window to a workspace with mainMod + SHIFT + A || D
bind = $secondMod, D, movetoworkspace, r+1
bind = $secondMod, A, movetoworkspace, r-1

# Scroll through existing workspaces with mainMod + A || D
bind = $mainMod, D, workspace, r+1
bind = $mainMod, A, workspace, r-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, amixer set 'Master' 5%+
bindel = ,XF86AudioLowerVolume, exec, amixer set 'Master' 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86AudioPlay, exec, playerctl play-pause
bindel = ,XF86AudioNext, exec, playerctl next
bindel = ,XF86AudioPrev, exec, playerctl previous
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-

general {
    border_size = 0
    no_border_on_floating = true
    gaps_in = 5
    gaps_out = 10, 10, 10, 10
    gaps_workspaces = 0
    col.inactive_border = rgba(595959aa)
    col.active_border = rgba(33ccffaa) rgba(00ff99aa) 45deg
    col.nogroup_border = 0xffffaaff
    col.nogroup_border_active = 0xffff00ff
    layout = master
    no_focus_fallback = false
    resize_on_border = false
    extend_border_grab_area = 15
    hover_icon_on_border = true
    allow_tearing = true
    resize_corner = 0

    snap {
        enabled = true
        window_gap = 10
        monitor_gap = 10
        border_overlap = true
    }
}

# VISUAL OPTIONS
decoration {
    rounding = 12
    rounding_power = 2.0
    active_opacity = 0.92
    inactive_opacity = 0.7
    fullscreen_opacity = 1.0
    dim_inactive = true
    dim_strength = 0.3
    dim_special = 0.4

    blur {
        enabled = true
        size = 8
        passes = 3
        ignore_opacity = false
        new_optimizations = true
        xray = false
        noise = 0
        contrast = 1.0
        brightness = 1.05
        vibrancy = 0.15
        vibrancy_darkness = 1
        special = false
        popups = false
        popups_ignorealpha = 0
        input_methods = true
        input_methods_ignorealpha = 0.2
    }

    shadow {
        enabled = false
        range = 30
        render_power = 4
        sharp = false
        ignore_window = true
        color = 0xffffffdd
        color_inactive = 0xffffff33
        offset = 0 0
        scale = 1.0
    }
}

animations {
    enabled = true
    bezier = ease, 0.25, 1.0, 0.5, 1.0  # кривая ускорения, как в macOS

    animation = windows, 1, 7, ease, slidefade  # окна появляются с fade и slide
    animation = windowsOut, 1, 7, ease, slidefade  # анимация исчезновения

    animation = windowsMove, 1, 6, ease  # перемещение окон
    animation = fade, 1, 12, ease  # общее затухание
    animation = workspaces, 1, 8, ease, slide  # переключение рабочих пространств
}

###########################
### Master Layout Rules ###
###########################

master {
    orientation = right
    new_status = master
    new_on_top = true
    # no_gaps_when_only = 0
    mfact = 0.70
}

#################
### Variables ###
#################

misc {
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    force_default_wallpaper = -1
    disable_hyprland_logo = false
    focus_on_activate = true
}

binds {
    window_direction_monitor_fallback = true
}

cursor {
    sync_gsettings_theme = true
    inactive_timeout = 30
    enable_hyprcursor = true
}

input {
    kb_layout = us, ru
    kb_options = grp:win_space_toggle
    follow_mouse = 1
}

# Devices: 
#   - mouse
#   - trackpad
device {
    name = apple-inc.-magic-trackpad-2
    disable_while_typing = false
    natural_scroll = true
    clickfinger_behavior = true
    tap-to-click = false
}


device {
    name = razer-atheris-mouse
    natural_scroll = true
    accel_profile = flat
}


gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 4
    workspace_swipe_min_fingers = false
    workspace_swipe_distance = 1500
    workspace_swipe_touch = false
    workspace_swipe_invert = true
    workspace_swipe_min_speed_to_force = 30
    workspace_swipe_cancel_ratio = 0.0
    workspace_swipe_create_new = true
    workspace_swipe_direction_lock = true
    workspace_swipe_direction_lock_threshold = 10
    workspace_swipe_forever = true
    workspace_swipe_use_r = true
}